{"version":3,"file":"json_translation_serializer.js","sourceRoot":"","sources":["../../../../../../../libs/cli/src/cmds/extract/translation_files/json_translation_serializer.ts"],"names":[],"mappings":";;AAgBA,MAAa,yBAAyB;IACpC,UAAU,CACR,QAAkD,EAClD,MAAc;QAEd,MAAM,OAAO,GAA8B;YACzC,MAAM;YACN,YAAY,EAAE,EAAE;SACjB,CAAC;QACF,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACzB,OAAO,CAAC,YAAY,CACjB,OAA0B,CAAC,EAAE;gBAC3B,OAA+B,CAAC,SAAS,CAC7C;gBACE,OAA0B,CAAC,IAAI;oBAC/B,OAA+B,CAAC,aAAa,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC;CACF;AAnBD,8DAmBC","sourcesContent":["/**\r\n * @license\r\n * Copyright Google Inc. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\nimport { ɵParsedMessage } from '@angular/localize';\r\nimport { ParsedMessageLegacy } from '../../../cmds/common/util';\r\nimport { TranslationSerializer } from './translation_serializer';\r\n\r\ninterface SimpleJsonTranslationFile {\r\n  locale: string;\r\n  translations: Record<string, string>;\r\n}\r\n\r\nexport class JsonTranslationSerializer implements TranslationSerializer {\r\n  renderFile(\r\n    messages: (ɵParsedMessage | ParsedMessageLegacy)[],\r\n    locale: string\r\n  ): string {\r\n    const fileObj: SimpleJsonTranslationFile = {\r\n      locale,\r\n      translations: {}\r\n    };\r\n    messages.forEach(message => {\r\n      fileObj.translations[\r\n        (message as ɵParsedMessage).id ||\r\n          (message as ParsedMessageLegacy).messageId\r\n      ] =\r\n        (message as ɵParsedMessage).text ||\r\n        (message as ParsedMessageLegacy).messageString;\r\n    });\r\n    return JSON.stringify(fileObj, null, 2);\r\n  }\r\n}\r\n"]}