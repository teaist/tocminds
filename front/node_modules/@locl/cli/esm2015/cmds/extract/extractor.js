/**
 * @fileoverview added by tsickle
 * Generated from: cmds/extract/extractor.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { transformSync } from '@babel/core';
import { makeEs2015ExtractPlugin } from './source_files/es2015_extract_plugin';
import { makeEs5ExtractPlugin } from './source_files/es5_extract_plugin';
/**
 * A class that extracts parsed messages from file contents, by parsing the contents as JavaScript
 * and looking for occurrences of `$localize` in the source code.
 */
export class Extractor {
    /**
     * @param {?} diagnostics
     */
    constructor(diagnostics) {
        this.diagnostics = diagnostics;
        this.messages = [];
    }
    /**
     * @param {?} sourceCode
     * @return {?}
     */
    extractMessages(sourceCode) {
        if (sourceCode.includes('$localize')) {
            // Only bother to parse the file if it contains a reference to `$localize`.
            transformSync(sourceCode, {
                plugins: [
                    makeEs2015ExtractPlugin(this.messages, this.diagnostics),
                    makeEs5ExtractPlugin(this.messages, this.diagnostics)
                ],
                code: false,
                ast: false
            });
        }
    }
}
if (false) {
    /** @type {?} */
    Extractor.prototype.messages;
    /**
     * @type {?}
     * @private
     */
    Extractor.prototype.diagnostics;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0cmFjdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGxvY2wvY2xpLyIsInNvdXJjZXMiOlsiY21kcy9leHRyYWN0L2V4dHJhY3Rvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQVFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFNUMsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDL0UsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7Ozs7O0FBT3pFLE1BQU0sT0FBTyxTQUFTOzs7O0lBR3BCLFlBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBRjVDLGFBQVEsR0FBcUIsRUFBRSxDQUFDO0lBRWUsQ0FBQzs7Ozs7SUFFaEQsZUFBZSxDQUFDLFVBQWtCO1FBQ2hDLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUNwQywyRUFBMkU7WUFDM0UsYUFBYSxDQUFDLFVBQVUsRUFBRTtnQkFDeEIsT0FBTyxFQUFFO29CQUNQLHVCQUF1QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQztvQkFDeEQsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDO2lCQUN0RDtnQkFDRCxJQUFJLEVBQUUsS0FBSztnQkFDWCxHQUFHLEVBQUUsS0FBSzthQUNYLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztDQUNGOzs7SUFqQkMsNkJBQWdDOzs7OztJQUVwQixnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXHJcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcclxuICovXHJcbmltcG9ydCB7IMm1UGFyc2VkTWVzc2FnZSB9IGZyb20gJ0Bhbmd1bGFyL2xvY2FsaXplJztcclxuaW1wb3J0IHsgdHJhbnNmb3JtU3luYyB9IGZyb20gJ0BiYWJlbC9jb3JlJztcclxuXHJcbmltcG9ydCB7IG1ha2VFczIwMTVFeHRyYWN0UGx1Z2luIH0gZnJvbSAnLi9zb3VyY2VfZmlsZXMvZXMyMDE1X2V4dHJhY3RfcGx1Z2luJztcclxuaW1wb3J0IHsgbWFrZUVzNUV4dHJhY3RQbHVnaW4gfSBmcm9tICcuL3NvdXJjZV9maWxlcy9lczVfZXh0cmFjdF9wbHVnaW4nO1xyXG5pbXBvcnQgeyBEaWFnbm9zdGljcyB9IGZyb20gJy4uL2NvbW1vbi9kaWFnbm9zdGljcyc7XHJcblxyXG4vKipcclxuICogQSBjbGFzcyB0aGF0IGV4dHJhY3RzIHBhcnNlZCBtZXNzYWdlcyBmcm9tIGZpbGUgY29udGVudHMsIGJ5IHBhcnNpbmcgdGhlIGNvbnRlbnRzIGFzIEphdmFTY3JpcHRcclxuICogYW5kIGxvb2tpbmcgZm9yIG9jY3VycmVuY2VzIG9mIGAkbG9jYWxpemVgIGluIHRoZSBzb3VyY2UgY29kZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBFeHRyYWN0b3Ige1xyXG4gIG1lc3NhZ2VzOiDJtVBhcnNlZE1lc3NhZ2VbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRpYWdub3N0aWNzOiBEaWFnbm9zdGljcykge31cclxuXHJcbiAgZXh0cmFjdE1lc3NhZ2VzKHNvdXJjZUNvZGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKHNvdXJjZUNvZGUuaW5jbHVkZXMoJyRsb2NhbGl6ZScpKSB7XHJcbiAgICAgIC8vIE9ubHkgYm90aGVyIHRvIHBhcnNlIHRoZSBmaWxlIGlmIGl0IGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRvIGAkbG9jYWxpemVgLlxyXG4gICAgICB0cmFuc2Zvcm1TeW5jKHNvdXJjZUNvZGUsIHtcclxuICAgICAgICBwbHVnaW5zOiBbXHJcbiAgICAgICAgICBtYWtlRXMyMDE1RXh0cmFjdFBsdWdpbih0aGlzLm1lc3NhZ2VzLCB0aGlzLmRpYWdub3N0aWNzKSxcclxuICAgICAgICAgIG1ha2VFczVFeHRyYWN0UGx1Z2luKHRoaXMubWVzc2FnZXMsIHRoaXMuZGlhZ25vc3RpY3MpXHJcbiAgICAgICAgXSxcclxuICAgICAgICBjb2RlOiBmYWxzZSxcclxuICAgICAgICBhc3Q6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=